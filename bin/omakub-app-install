#!/bin/bash

# omakub-app-install: Install an app, specified by its name.
# Usage: omakub-app-install <app-name>

if [[ -z "$1" ]]; then
  echo "Usage: omakub-app-install <app-name>" >&2
  exit 1
fi

APP_NAME=$(echo "$1" | sed -E 's/<[^>]+>//g' | tr '[:upper:]' '[:lower:]' | tr ' ' '-')
APP_DIR="$HOME/.local/share/omakub/applications/install"

# Check if the application directory exists
if [[ ! -d "$APP_DIR" ]]; then
  echo "Error: Application directory $APP_DIR does not exist." >&2
  exit 1
fi

# If APP_DIR exists, source it to install the app
if [[ -f "$APP_DIR/$APP_NAME.sh" ]]; then
  source "$APP_DIR/$APP_NAME.sh"
# If the app is not recognized, print an error message
else
  echo "Error: App $APP_NAME is not recognized or not available for installation." >&2
  exit 1
fi
